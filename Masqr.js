const _0x6379b4=_0x2103;function _0x3d21(){const _0x1ab2e2=['/Masqrd','utf8','send','authorization','cwd','split','readFile','884OGilkP','5929970EAdxSB','replace','join','text/html','headers','refreshcheck','access','https://masqr.gointerstellar.app/validate?license=','Content-Type','log','setHeader','status','from','true','.html','Failed.html','cookies','authcheck','6AidwkR','License\x20valid','19806350oxcCCq','promises','16iCRupQ','host','WWW-Authenticate','6675403JSvhEu','23307UJQnGe','/ca/','&host=','now','base64','error','66958kkwddq','13485735zRcSxz','4825704DCHAUJ','json','cookie'];_0x3d21=function(){return _0x1ab2e2;};return _0x3d21();}(function(_0x5d7692,_0x2a015c){const _0x28b33b=_0x2103,_0x4c6771=_0x5d7692();while(!![]){try{const _0x473d81=parseInt(_0x28b33b(0x130))/0x1*(parseInt(_0x28b33b(0x126))/0x2)+-parseInt(_0x28b33b(0x12a))/0x3*(-parseInt(_0x28b33b(0x10f))/0x4)+-parseInt(_0x28b33b(0x110))/0x5*(parseInt(_0x28b33b(0x122))/0x6)+parseInt(_0x28b33b(0x129))/0x7+-parseInt(_0x28b33b(0x132))/0x8+parseInt(_0x28b33b(0x131))/0x9+-parseInt(_0x28b33b(0x124))/0xa;if(_0x473d81===_0x2a015c)break;else _0x4c6771['push'](_0x4c6771['shift']());}catch(_0x3ae76a){_0x4c6771['push'](_0x4c6771['shift']());}}}(_0x3d21,0xe439f));import _0x3b56a4 from'node:fs';import _0x2cf0f2 from'node:path';function _0x2103(_0x3a247d,_0x93ad9b){const _0x3d2112=_0x3d21();return _0x2103=function(_0x2103da,_0x2ce7b1){_0x2103da=_0x2103da-0x10a;let _0x31e8bf=_0x3d2112[_0x2103da];return _0x31e8bf;},_0x2103(_0x3a247d,_0x93ad9b);}import _0x53a34f from'node-fetch';const LICENSE_SERVER_URL=_0x6379b4(0x117),Fail=_0x3b56a4['readFileSync'](_0x6379b4(0x11f),_0x6379b4(0x136));export function setupMasqr(_0x3609ef){_0x3609ef['use'](async(_0x3dd61f,_0x13ba6d,_0x5ee321)=>{const _0x5385a4=_0x2103;if(_0x3dd61f['url']['includes'](_0x5385a4(0x12b))){_0x5ee321();return;}const _0x5e986f=_0x3dd61f[_0x5385a4(0x114)][_0x5385a4(0x10b)];if(_0x3dd61f[_0x5385a4(0x120)][_0x5385a4(0x121)]){_0x5ee321();return;}if(_0x3dd61f['cookies'][_0x5385a4(0x115)]!==_0x5385a4(0x11d)){_0x13ba6d[_0x5385a4(0x134)](_0x5385a4(0x115),_0x5385a4(0x11d),{'maxAge':0x2710}),MasqFail(_0x3dd61f,_0x13ba6d);return;}if(!_0x5e986f){_0x13ba6d[_0x5385a4(0x11a)](_0x5385a4(0x128),'Basic'),_0x13ba6d[_0x5385a4(0x11b)](0x191),MasqFail(_0x3dd61f,_0x13ba6d);return;}const _0x3c7070=Buffer[_0x5385a4(0x11c)](_0x5e986f['split']('\x20')[0x1],_0x5385a4(0x12e))['toString']()[_0x5385a4(0x10d)](':'),_0x4e5d48=_0x3c7070[0x1];try{const _0x1a11e0=await _0x53a34f(LICENSE_SERVER_URL+_0x4e5d48+_0x5385a4(0x12c)+_0x3dd61f[_0x5385a4(0x114)][_0x5385a4(0x127)]),_0x483c19=(await _0x1a11e0[_0x5385a4(0x133)]())[_0x5385a4(0x11b)];console[_0x5385a4(0x119)](LICENSE_SERVER_URL+_0x4e5d48+_0x5385a4(0x12c)+_0x3dd61f[_0x5385a4(0x114)][_0x5385a4(0x127)]+'\x20returned\x20'+_0x483c19);if(_0x483c19===_0x5385a4(0x123)){_0x13ba6d[_0x5385a4(0x134)](_0x5385a4(0x121),_0x5385a4(0x11d),{'expires':new Date(Date[_0x5385a4(0x12d)]()+0x16d*0x18*0x3c*0x3c*0x3e8)}),_0x13ba6d[_0x5385a4(0x10a)]('<script>\x20window.location.href\x20=\x20window.location.href\x20</script>');return;}MasqFail(_0x3dd61f,_0x13ba6d);}catch(_0x3aa793){console[_0x5385a4(0x12f)](_0x3aa793),MasqFail(_0x3dd61f,_0x13ba6d);}});}async function MasqFail(_0x1f366d,_0x2fbb53){const _0x29ff6d=_0x6379b4;if(!_0x1f366d['headers'][_0x29ff6d(0x127)])return;const _0x1270c9=_0x1f366d['headers'][_0x29ff6d(0x127)]+_0x29ff6d(0x11e),_0x370f83=_0x2cf0f2['normalize'](_0x1270c9)[_0x29ff6d(0x111)](/^(\.\.(\/|\\|$))+/,''),_0x35a347=_0x2cf0f2[_0x29ff6d(0x112)](process[_0x29ff6d(0x10c)]()+_0x29ff6d(0x135),_0x370f83);try{await _0x3b56a4[_0x29ff6d(0x125)][_0x29ff6d(0x116)](_0x35a347);const _0x2f60be=await _0x3b56a4[_0x29ff6d(0x125)][_0x29ff6d(0x10e)](_0x35a347,_0x29ff6d(0x136));_0x2fbb53[_0x29ff6d(0x11a)](_0x29ff6d(0x118),_0x29ff6d(0x113)),_0x2fbb53[_0x29ff6d(0x10a)](_0x2f60be);}catch(_0x24ad1d){_0x2fbb53[_0x29ff6d(0x11a)](_0x29ff6d(0x118),_0x29ff6d(0x113)),_0x2fbb53[_0x29ff6d(0x10a)](Fail);}}